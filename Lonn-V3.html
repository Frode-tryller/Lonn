<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L칮nnskalkulator UB</title>
<style>
:root {
  --bg: #f2f2f7;
  --box: #ffffff;
  --text: #000000;
  --primary: #007aff;
  --accent: #34c759;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #000000;
    --box: #1c1c1e;
    --text: #ffffff;
    --primary: #0a84ff;
    --accent: #30d158;
  }
}

body {
  font-family: -apple-system, BlinkMacSystemFont;
  background: var(--bg);
  color: var(--text);
  margin:0;
  padding:20px;
}

h1 {
  text-align:center;
  margin-bottom:20px;
}

.box {
  background: var(--box);
  padding:15px;
  margin-bottom:15px;
  border-radius:12px;
  box-shadow:0 3px 6px rgba(0,0,0,0.1);
}

input, select {
  width: 100%;
  padding:8px;
  margin:5px 0 10px 0;
  font-size:16px;
  border-radius:6px;
  border:1px solid #ccc;
  box-sizing:border-box;
}

button {
  width:100%;
  padding:12px;
  font-size:18px;
  background: var(--primary);
  color:white;
  border:none;
  border-radius:12px;
  cursor:pointer;
}

button:hover {
  opacity:0.9;
}

.result {
  margin-top:15px;
  font-size:18px;
}

.history {
  max-height:200px;
  overflow-y:auto;
  padding:5px 0;
}

.history-item {
  border-bottom:1px solid #ccc;
  padding:5px 0;
}
</style>
</head>
<body>

<h1>游눯 L칮nnskalkulator UB</h1>

<div class="box">
  <h3>Velg m친ned</h3>
  <select id="month">
    <option value="2026-01">Januar 2026</option>
    <option value="2026-02">Februar 2026</option>
    <option value="2026-03">Mars 2026</option>
    <option value="2026-04">April 2026</option>
    <option value="2026-05">Mai 2026</option>
    <option value="2026-06">Juni 2026</option>
    <option value="2026-07">Juli 2026</option>
    <option value="2026-08">August 2026</option>
    <option value="2026-09">September 2026</option>
    <option value="2026-10">Oktober 2026</option>
    <option value="2026-11">November 2026</option>
    <option value="2026-12">Desember 2026</option>
  </select>
</div>

<div class="box">
  <h3>Grunnl칮nn</h3>
  Timel칮nn <input id="timelonn" type="number" value="193">
  Vanlige timer <input id="timer" type="number">
</div>

<div class="box">
  <h3>Tillegg</h3>

  <input placeholder="UB1" id="n1" value="UB1" readonly>
  Timer <input id="t1" type="number">
  Sats <input id="s1" type="number" value="22" readonly>

  <input placeholder="UB2" id="n2" value="UB2" readonly>
  Timer <input id="t2" type="number">
  Sats <input id="s2" type="number" value="45" readonly>

  <input placeholder="UB3" id="n3" value="UB3" readonly>
  Timer <input id="t3" type="number">
  Sats <input id="s3" type="number" value="55" readonly>

  <input placeholder="UB4" id="n4" value="UB4" readonly>
  Timer <input id="t4" type="number">
  Sats <input id="s4" type="number" value="110" readonly>
</div>

<div class="box">
  <h3>Skatt</h3>
  Skatteprosent <input id="skatt" type="number" value="30">
</div>

<button onclick="beregn()">Regn ut og lagre</button>

<div class="box result" id="resultat"></div>

<div class="box">
  <h3>Historikk</h3>
  <div id="history" class="history"></div>
</div>

<script>
function beregn() {
  const m친ned = month.value;
  const grunn = (timelonn.value||0) * (timer.value||0);

  const tillegg = [
    {n:n1.value,t:t1.value,s:s1.value},
    {n:n2.value,t:t2.value,s:s2.value},
    {n:n3.value,t:t3.value,s:s3.value},
    {n:n4.value,t:t4.value,s:s4.value}
  ];

  let tilleggSum = 0;
  let detaljer = "";

  // Beregn tillegg basert p친 antall timer (sats er ferdig utfylt)
  tillegg.forEach(a => {
    if(a.t && a.s) {
      const sum = a.t * a.s;
      tilleggSum += sum;
      detaljer += `${a.n}: ${sum.toLocaleString("no-NO")} kr<br>`;
    }
  });

  const brutto = grunn + tilleggSum;
  const skattBelop = brutto * (skatt.value/100);
  const netto = brutto - skattBelop;

  const html = `
    <b>Detaljert oversikt for ${m친ned}</b><br><br>
    Grunnl칮nn: ${grunn.toLocaleString("no-NO")} kr<br>
    ${detaljer}
    <hr>
    Brutto: ${brutto.toLocaleString("no-NO")} kr<br>
    Skatt: ${skattBelop.toLocaleString("no-NO")} kr<br>
    <b>Netto: ${netto.toLocaleString("no-NO")} kr</b>
  `;

  resultat.innerHTML = html;

  // lagre i localStorage med m친ned som n칮kkel
  localStorage.setItem(`lonn-${m친ned}`, html);

  visHistorikk();
}

function visHistorikk() {
  const historyDiv = document.getElementById("history");
  historyDiv.innerHTML = "";

  Object.keys(localStorage).sort().reverse().forEach(key => {
    if(key.startsWith("lonn-")) {
      const div = document.createElement("div");
      div.className = "history-item";
      div.innerHTML = `<b>${key.replace("lonn-","")}</b><br>${localStorage[key]}`;
      historyDiv.appendChild(div);
    }
  });
}

// vis historikk ved last
visHistorikk();
</script>
</body>
</html>
